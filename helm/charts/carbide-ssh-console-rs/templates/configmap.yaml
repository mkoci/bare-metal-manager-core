apiVersion: v1
kind: ConfigMap
metadata:
  name: ssh-console-rs-config-files
  namespace: {{ include "carbide-ssh-console-rs.namespace" . }}
  labels:
    {{- include "carbide-ssh-console-rs.labels" . | nindent 4 }}
data:
  config.toml: |
    {{- if .Values.configFiles.config }}
    {{- .Values.configFiles.config | nindent 4 }}
    {{- else }}
    {{- /* Replace hardcoded forge-system namespace with actual global.namespace */ -}}
    {{- .Files.Get "files/ssh-console-rs-config.toml" | replace "forge-system" (include "carbide-ssh-console-rs.namespace" .) | nindent 4 }}
    {{- end }}
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: ssh-console-rs-otelcol-config
  namespace: {{ include "carbide-ssh-console-rs.namespace" . }}
  labels:
    {{- include "carbide-ssh-console-rs.labels" . | nindent 4 }}
data:
  config.yaml: |
    {{- if .Values.configFiles.otelcolConfig }}
    {{- .Values.configFiles.otelcolConfig | nindent 4 }}
    {{- else }}
    {{- .Files.Get "files/otelcol-config.yaml" | nindent 4 }}
    {{- end }}
